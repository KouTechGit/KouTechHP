<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
  <title>動画で学ぶ | KouTech</title>
  <link rel="stylesheet" href="../assets/css/style.css">
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;700&family=Noto+Sans+JP:wght@400;700&display=swap" rel="stylesheet">
  <!-- MathJax for LaTeX math rendering -->
  <script>
    window.MathJax = {
      tex: {
        inlineMath: [['$', '$'], ['\\(', '\\)']],
        displayMath: [['$$', '$$'], ['\\[', '\\]']]
      }
    };
  </script>
  <script id="MathJax-script" async src="../assets/lib/mathjax/tex-mml-chtml.js"></script>
</head>
<body>
  <header>
    <div class="header-inner">
      <a href="../index.html" class="logo">
        <img src="../assets/img/logo.png" alt="KouTech">
      </a>
      <div id="header-title" class="header-title" style="flex: 1; text-align: center; font-size: 1.1rem; font-weight: 600; color: var(--text-main);">
        <!-- JavaScript で動的に生成される -->
      </div>
      <a href="index.html" class="btn btn-outline" style="font-size: 0.9rem; padding: 0.5rem 1rem;">
        一覧に戻る
      </a>
    </div>
  </header>

  <!-- ボトムシート用オーバーレイ -->
  <div class="bottom-sheet-overlay" id="bottom-sheet-overlay"></div>

  <div class="player-layout">
    <!-- 左サイドバー: カリキュラム -->
    <aside class="player-sidebar-left" id="sidebar-left">
      <div class="sidebar-header">
        <div class="drag-handle mobile-only"></div>
        <h2 id="sidebar-title">動画一覧</h2>
        <button class="sidebar-toggle desktop-only" aria-label="サイドバーを開閉">
          <span>−</span>
        </button>
        <button class="bottom-sheet-close mobile-only" aria-label="閉じる">
          <span>✕</span>
        </button>
      </div>
      <div id="lesson-list" class="lesson-list">
        <!-- JavaScript で動的に生成される -->
        <div style="padding:2rem; text-align:center; color:var(--text-sub);">読み込み中...</div>
      </div>
    </aside>

    <!-- メインコンテンツ: 動画プレーヤー -->
    <main class="player-main">
      <div class="video-container">
        <div id="player"></div>
      </div>
      
      <!-- モバイル: アクションボタン -->
      <div class="mobile-actions">
        <!-- onclick属性は後方互換性のため残すが、PlayerUIで別途ハンドリングも可能 -->
        <button class="mobile-action-btn" onclick="openBottomSheet('lesson-list')" aria-label="動画一覧を開く">
          <span>動画一覧</span>
        </button>
        <button class="mobile-action-btn" onclick="openBottomSheet('resources')" aria-label="講義資料を開く">
          <span>講義資料</span>
        </button>
      </div>
      
      <!-- 動画の説明 -->
      <div class="video-description">
        <h3>動画の概要</h3>
        <div class="description-content">
          <!-- JavaScript で動的に生成される -->
          <p style="color: var(--text-sub); margin-bottom: 1rem;">読み込み中...</p>
        </div>
      </div>
    </main>

    <!-- 右サイドバー: 講義資料 -->
    <aside class="player-sidebar-right" id="sidebar-right">
      <div class="sidebar-header">
        <button class="sidebar-toggle desktop-only" aria-label="サイドバーを開閉">
          <span>−</span>
        </button>
        <h3>講義資料</h3>
        <button class="bottom-sheet-close mobile-only" aria-label="閉じる">
          <span>✕</span>
        </button>
      </div>
      <div id="resources-list" class="resources-list">
        <!-- JavaScript で動的に生成される -->
      </div>
    </aside>
  </div>

  <!-- PDF.js -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/pdf.js/3.11.174/pdf.min.js"></script>
  
  <!-- KouTech Player Scripts -->
  <script src="../assets/js/pdf-viewer.js"></script>
  <script src="../assets/js/player-ui.js"></script>
  <script src="../assets/js/player.js"></script>
</body>
</html>
